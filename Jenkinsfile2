pipeline {
    agent any   
stages {
        stage('Configuration') {
            steps {
                script {
                    echo "Vous pouvez ajouter des étapes de configuration communes à tous les couloirs ici" 
                }
            }
        }

        stage('Tests communs') {
            steps {
                script {
                    echo "Vous pouvez ajouter des tests communs à tous les couloirs ici" 
                }
            }
        }

script {
            // Définir les stages spécifiques à chaque couloir
            switch(COULOIR) {
                case '031':
                    stage('Etape A - Déploiement et Tests') {
                        steps {
                            echo " Déploiement dans le couloir 031"
                            echo "Exécution des tests"
                        }
                    }
                    break
                case '021':
                    stage('Etape B - Déploiement et Tests') {
                          steps {
                            echo " Déploiement dans le couloir 021"
                            echo "Exécution des tests"
                        }
                    }
                    break
                case '011':
                    stage('Etape C - Déploiement et Tests') {
                        steps {
                            echo " Déploiement dans le couloir 011"
                            echo "Exécution des tests"
                        }
                    }
                    break
                default:
                    error "Couloir inconnu: ${COULOIR}"
            }
        }
    

}
    post {
        failure
        {
            echo "Échec dans le couloir ${COULOIR}. Veuillez vérifier les rapports et logs."
        }
        success
        {
            echo "Les tests ont réussi dans le couloir ${COULOIR}. La construction est prête pour la validation manuelle."
        }
    }
 }

